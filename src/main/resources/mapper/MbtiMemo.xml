<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.e4i2.repository.MbtiMemoDAO">

    <!-- SQL 쿼리를 정의하는 부분 -->

    <!-- mbti 메모 인서트 -->
    <insert id="mbtiMemoInsert" parameterType="io.e4i2.dto.MbtiMemoDTO" useGeneratedKeys="true" keyProperty="devicePk">
        INSERT INTO MBTI_MEMO
        (MEMO_NAME, MEMO_AGE, MEMO_SEX, MEMO_RELATION, MEMO_INTEREST,MEMO_SUBMIT_DATE, MBTI,DEVICE_ID)
        VALUES
            (#{memoName}, #{memoAge}, #{memoSex}, #{memoRelation}, #{memoInterest},now(), #{mbti},#{deviceId})
    </insert>


    <select id="duplicationCheck" parameterType="string" resultType="io.e4i2.dto.MbtiMemoDTO">
        SELECT DEVICE_PK
             , DEVICE_ID
        FROM DEVICE
        WHERE DEVICE_ID = #{deviceId}
    </select>


</mapper>
